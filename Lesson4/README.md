Lesson4 もっとそれっぽいプログラム - にわとりblog -
===================================

とりあえずデータを保存できるようにしよう
-----------------------------------

ロバのみみblogは投稿した瞬間には記事が見れますが、
残念なことに他の人に記事を見せるといったようなことができません。

何故かというと、投稿したデータをどこにも保存していないため、再度同じ記事を表示しようとしても
誰も覚えてないから表示することができないためです。

なので、まずはデータを保存する方法をお勉強していきましょう。

データベースのおはなし
-----------------------------------

データを保存するためには何かに **永続的(一時的ではなく、ずっと)に保存** しておかないと、
使いたい時にデータを呼び出すことができません。

また、データを呼び出す時に **データの検索** ができないと、すべてのデータを呼び出して、
一つひとつ内容を確認して…と何やら頭の悪そうなことをしないといけなくなります。

さらに[Lesson1](../Lesson1)で学んだ **CRUD** はできないとどうしようもありません。

これらを便利にやってくれる仕組みのことを **データベース** と言います。

XAMPPをインストールしている段階で「MySQL」というデータベースソフトがインストールされているので
それを使用します。

データを永続的に保存するハコを作る
------------------------------------

MySQLでは *テーブル* と言う入れ物を事前に準備しておいて、そこに入れる必要があります。

blogの場合こんなハコがあれば大丈夫かな?

| 名前 |用途| データの形 |
|----|-----|-------|
|id|記事を特定する|数字|
|article|記事の本文|テキスト|
|author|記事の著者|テキスト|
|create_date|記事の作成日|日付|
|update_date|記事の更新日|日付|

MacのXAMPPの場合はphpMyAdminからこのようなハコを作ることができます。

まずはblogというデータベースを作ります。phpMyAdminから簡単に作れるので作ってください。

次にarticlesというハコ(テーブル)を作ります。

phpMyAdminで作る時はこんな感じになります。

![](articles.png)

データ型のところの *INT* は「整数のデータ」という意味です。
同様に *TEXT* はテキスト(文字の情報)、 *DATE* は日付の情報という意味になります。

idのところの *インデックス* のところに「PRIMARY」と書かれていますが、これは
PRIMARYが設定されているところは *必ずダブってない* ことを保証する列になります。

どんなところで使用するかというと、blogの記事の場合、

* 同じ本文
* 同じ著者
* 同じ作成日
* 同じ更新日

の記事があっても一応はおかしくないはずです。

なんですが、間違って2つ作っちゃったので一つは消したい。
といった時にCRUDのD(DELETE:削除)の命令を出すのですが、
**どれを消していいのかわからないので2つ消しちゃう** ということになりかねません。
なので、内容諸々はダブってても必ずダブっていない情報(今回でいうとid)を
付与しておくことで、Dの時に確実にどれを消す!っていうのを指定できることができます。

また、CRUDのR(Read:読み込み)の時にも「これを読み込みたい!」っていった時にハコに入っている
情報を検索しないといけないのですが、IDに事前にインデックス(本の索引)を用意しておくことで
すばやくハコのどこにあるか検索することができます。

PRIMARYを指定すると *ダブってない* のと *インデックスを作る* の2つを同時に満たしてくれます。
とりあえずテーブル作る時にはできるだけ何かしらPRIMARYの列を用意するようにしましょう。

あと謎の *A_I* というのがありますが、これは「Auto Increment」の略です。
Incrementとは「1つ増やす」という意味で情報を追加するたびに1ずつ増えたデータを自動的に入れてくれる機能を有効にする。という意味になります。

idはダブっちゃ困るのでこのA_Iを使用して自動的に増やしていけばダブることはない。のでチェックが入っています。

こまかい話は今は覚えなくても大丈夫です。なんかあのせんせーがわけのわからないこと言ってたんだな。くらいで今の時点では大丈夫です。
(もちろん、お仕事としてプログラムを作っていく時には大切な概念なので、しっかり覚えておいたほうがいいですが…)

こんなかんじでハコを作ることができます。

### SQLで実行する場合

WIP

データを入れてみよう
------------------------------

ハコを作ったので、データを入れてみましょう。

通常データを入れる時にはSQLというものを使用してCRUDなことをするのですが、
それを覚えるのもちょっと大変なので、別の方法を使用してデータを入れていきます。
