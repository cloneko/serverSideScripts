ちょっとblogっぽいの - おひとりさまblog -
======================================

普通のblogだとこんなことができるはず…

* 記事の投稿
* 記事の閲覧
* 記事の編集
* 記事の一覧の表示

あとはデータベースにたまっている記事を「一覧で表示」するようにしておいたほうが
どんな記事書いたっけなぁ…みたいなのができて便利です。
それはLesson5でやったTwigのforを使用すれば可能になります。

今の時点で不便なこと… → セッションを使う
----------------------------------------

今の時点で不便なことがあって、何かというと、記事を投稿する時に投稿前の確認ができない。
ということがあります。

一度データベースに入れてしまって、表示してみて確認してもいいんですが、
可能であればデータベースに登録してしまう前にプレビューできたほうがいいこともあります。

一時的にサーバー側にデータを保存しておいて、次のページ、また次のページと
その情報を引き継ぐ時に使用する機能として **セッション** というものが用意されています。

[PHP公式ドキュメントのSessionの基本的な使い方](http://php.net/manual/ja/session.examples.basic.php)に書いてあるとおり、プログラムのはじまりに

```php
session_start();
```
と書くと、セッションを使うことができるようになります。

[preview.php](preview.php)ではPOSTで受け取ったデータを一旦セッションに格納します。
OKなら[add.php](add.php)へ遷移し、データベースに登録を行ないます。

データベースに登録した情報は不要であればunsetを使用して削除しましょう。

このセッションの機能を使用すれば、記事投稿画面に入る前にログインしているかを確認して、
ログインしていなければログインさせる。というようなことができるようになります。

### 課題

ログインできるようにして、ログインしていない人は編集画面(input.htmlと同じ内容のフォーム)を表示しないようにしよう。

blogっぽいもの?
--------------------------

これでなんとなく一通りblogぽいものが完成したと思います。
いくらでも突き詰めれば足りない機能はあるし、編集も削除もできないで、何がblogだ!っていうかもしれません。

みなさんはなんとなくではありますが、blogの機能を追加できる技術を身に付けています。

あとはみなさんが、自分の頭で考え、自分の力で機能を拡張していく…そういうスキルを身に付けてください。
教科書と[PHPの公式ドキュメント](http://php.net/manual/ja/)と仲間達と協力してプログラミングの
経験を積んでいって、自由にプログラムを書けるようになっていきましょう。

### ログイン実装時の注意

課題でログインしている時にフォームを出すっていう実装を指示していますが、
実際にデータベースに登録する直前にもセッションの有無をチェックしないと、勝手にフォームが作られた
時に記事を登録できてしまう不具合が発生します。

### 課題2

現時点でパスワードをプログラムに直接平文で書いている場合、ソースコードが流出した場合に
パスワードがバレてしまいます。
また、データベースにパスワードを平文で入れていると、結局データベースから情報抜かれた時に
パスワードが流出してしまいます。

それを防ぐための方法を取ってください。

ヒントは「ハッシュ」と「Salt」です。
